{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:12","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:12","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1025869 \t and det.MFDE_TIPO_MOV = 30 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1025869 \tAND dev.MDEV_MOVF_TIPO = 30","time":"2023-09-20 12:55:12","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1025869,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e15\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e20\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eTRA\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e6\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e0\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e11082190\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e759021795\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e0\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e15\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:12","message":"Body XML : Solicitud 1025869 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>15</BodegaOrigen><BodegaDestino>20</BodegaDestino><TipoProceso>TRA</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>6</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>0</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>11082190</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>759021795</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>0</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>15</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1025869,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la recepción falta informar el número de operación de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:12","message":"Body bodyRetornado : Solicitud 1025869 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la recepción falta informar el número de operación de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 1025869 AND MFDE_TIPO_MOV = 30","time":"2023-09-20 12:55:12","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 1025869 AND MFDE_TIPO_MOV = 30","time":"2023-09-20 12:55:12","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1025869","time":"2023-09-20 12:55:12","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:12","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:12","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 965915 \t and det.MFDE_TIPO_MOV = 50 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 965915 \tAND dev.MDEV_MOVF_TIPO = 50","time":"2023-09-20 12:55:12","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:648","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(mdev_referencia_contable, 0) AS num_referencia from clin_far_movim_devol  where mdev_id = (    select nvl(mfde_mdev_id, 0)     from clin_far_movimdet    where mfde_id = 5447067)","time":"2023-09-20 12:55:13","message":"Query obtener Operacion de Referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":965915,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e20\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e15\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eTRA\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3338639\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e6\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e0\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1051765\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e759021795\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e0\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e20\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:13","message":"Body XML : Solicitud 965915 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>20</BodegaOrigen><BodegaDestino>15</BodegaDestino><TipoProceso>TRA</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3338639</OperacionConsumoRef><TipoOperacion>6</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>0</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1051765</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>759021795</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>0</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>20</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":965915,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[El proceso debe recepcionar todos los ítems despachados]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:13","message":"Body bodyRetornado : Solicitud 965915 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[El proceso debe recepcionar todos los ítems despachados]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 965915 AND MFDE_TIPO_MOV = 50","time":"2023-09-20 12:55:13","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 965915 AND MFDE_TIPO_MOV = 50","time":"2023-09-20 12:55:13","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,999)  WHERE  MOVF_SOLI_ID = 965915","time":"2023-09-20 12:55:13","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:13","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:13","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1009900 \t and det.MFDE_TIPO_MOV = 62 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (160) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1009900 \tAND dev.MDEV_MOVF_TIPO = 62","time":"2023-09-20 12:55:13","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1475","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1009900) and ESACODIGO = 2","time":"2023-09-20 12:55:13","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1511","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (160)  and mfde_soli_id = 1009900 and mfde_mein_codmei = '004458320' and MFDE_CANTIDAD >= '108'","time":"2023-09-20 12:55:13","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1009900,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e8\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e28\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107300\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e72501\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e004458320\u003c/ProductoCod\u003e\u003cCantidadStock\u003e108\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7300\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e108\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e8\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:13","message":"Body XML : Solicitud 1009900 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>8</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>28</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107300</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>72501</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>004458320</ProductoCod><CantidadStock>108</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7300</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>108</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>8</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1009900,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la devolución falta informar el número de operación de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:14","message":"Body bodyRetornado : Solicitud 1009900 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la devolución falta informar el número de operación de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1009900 AND MDEV_MOVF_TIPO = 62","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1009900 AND MDEV_MOVF_TIPO = 62","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1009900","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:14","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:14","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 968741 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 968741 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:14","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 968741) and ESACODIGO = 2","time":"2023-09-20 12:55:14","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 968741 and mfde_mein_codmei = '590119952' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:14","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":968741,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e4\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3341923\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107204\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e70229\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e590119952\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7204\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e4\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:14","message":"Body XML : Solicitud 968741 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>4</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3341923</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107204</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>70229</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>590119952</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7204</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>4</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":968741,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:14","message":"Body bodyRetornado : Solicitud 968741 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 968741 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 968741 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,999)  WHERE  MOVF_SOLI_ID = 968741","time":"2023-09-20 12:55:14","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:14","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:14","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1000519 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1000519 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:14","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1000519) and ESACODIGO = 2","time":"2023-09-20 12:55:14","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1000519 and mfde_mein_codmei = '000004705' and MFDE_CANTIDAD >= '4'","time":"2023-09-20 12:55:14","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1000519,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e5\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e28\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107503\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e71532\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e000004705\u003c/ProductoCod\u003e\u003cCantidadStock\u003e4\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7503\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e4\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e5\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:14","message":"Body XML : Solicitud 1000519 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>5</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>28</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107503</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>71532</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>000004705</ProductoCod><CantidadStock>4</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7503</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>4</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>5</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1000519,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la devolución falta informar el número de operación de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:15","message":"Body bodyRetornado : Solicitud 1000519 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la devolución falta informar el número de operación de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1000519 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:15","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1000519 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:15","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1000519","time":"2023-09-20 12:55:15","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:15","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:15","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1014195 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1014195 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:15","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '999512091' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '961017888' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '108234873' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '158673695' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '380513705' and MFDE_CANTIDAD >= '2'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '016820546' and MFDE_CANTIDAD >= '7'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 12:55:15","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '914498649' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:15","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014195,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3434877\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e73526\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e999512091\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e961017888\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cProductoCod\u003e108234873\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cProductoCod\u003e158673695\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cProductoCod\u003e380513705\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cProductoCod\u003e016820546\u003c/ProductoCod\u003e\u003cCantidadStock\u003e7\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cCantidadStock\u003e7\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cProductoCod\u003e914498649\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:15","message":"Body XML : Solicitud 1014195 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3434877</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>73526</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>999512091</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>961017888</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>3</Linea><ProductoCod>108234873</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>3</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>4</Linea><ProductoCod>158673695</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>4</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>5</Linea><ProductoCod>380513705</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>5</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>6</Linea><ProductoCod>016820546</ProductoCod><CantidadStock>7</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>6</Linea><CantidadStock>7</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>7</Linea><ProductoCod>914498649</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>7</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014195,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al encontrar despacho del producto 158673695 para realizar devolución]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:16","message":"Body bodyRetornado : Solicitud 1014195 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al encontrar despacho del producto 158673695 para realizar devolución]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014195 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:16","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014195 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:16","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,999)  WHERE  MOVF_SOLI_ID = 1014195","time":"2023-09-20 12:55:16","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:16","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:16","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1014649 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1014649 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:16","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '224195737' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '025467012' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '899896363' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '218940737' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '158673695' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '016820546' and MFDE_CANTIDAD >= '6'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '058198605' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 12:55:16","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '914498649' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 12:55:16","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014649,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3435471\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e73549\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e224195737\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e025467012\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cProductoCod\u003e899896363\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cProductoCod\u003e218940737\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cProductoCod\u003e158673695\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cProductoCod\u003e016820546\u003c/ProductoCod\u003e\u003cCantidadStock\u003e6\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cCantidadStock\u003e6\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cProductoCod\u003e058198605\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e8\u003c/Linea\u003e\u003cProductoCod\u003e914498649\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e8\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:16","message":"Body XML : Solicitud 1014649 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3435471</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>73549</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>224195737</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>025467012</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>3</Linea><ProductoCod>899896363</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>3</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>4</Linea><ProductoCod>218940737</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>4</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>5</Linea><ProductoCod>158673695</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>5</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>6</Linea><ProductoCod>016820546</ProductoCod><CantidadStock>6</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>6</Linea><CantidadStock>6</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>7</Linea><ProductoCod>058198605</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>7</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>8</Linea><ProductoCod>914498649</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>8</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014649,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al encontrar despacho del producto 158673695 para realizar devolución]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:17","message":"Body bodyRetornado : Solicitud 1014649 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al encontrar despacho del producto 158673695 para realizar devolución]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014649 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:17","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014649 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 12:55:17","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,999)  WHERE  MOVF_SOLI_ID = 1014649","time":"2023-09-20 12:55:17","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:17","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 12:55:17","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 12:55:17","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 12:55:17","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 12:55:17","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 12:55:17","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450125, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 12:55:18","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450125, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109228,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 12:55:18","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109228,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 12:55:18","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 12:55:18","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 12:55:18","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 12:55:18","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"info","file":"administradorLoggers.go:85","funcion":"logging.initLogger","time":"2023-09-20 13:13:43","message":"Logs FIN 700 abiertos exitosamente"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:54","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:54","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1025869 \t and det.MFDE_TIPO_MOV = 30 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1025869 \tAND dev.MDEV_MOVF_TIPO = 30","time":"2023-09-20 13:13:54","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1025869,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e15\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e20\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eTRA\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e6\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e0\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e11082190\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e759021795\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e0\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e15\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:54","message":"Body XML : Solicitud 1025869 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>15</BodegaOrigen><BodegaDestino>20</BodegaDestino><TipoProceso>TRA</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>6</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>0</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>11082190</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>759021795</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>0</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>15</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1025869,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la recepción falta informar el número de operación de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:54","message":"Body bodyRetornado : Solicitud 1025869 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la recepción falta informar el número de operación de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 1025869 AND MFDE_TIPO_MOV = 30","time":"2023-09-20 13:13:54","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 1025869 AND MFDE_TIPO_MOV = 30","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la recepción falta informar el número de operación de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1025869","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:55","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:55","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 965915 \t and det.MFDE_TIPO_MOV = 50 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 965915 \tAND dev.MDEV_MOVF_TIPO = 50","time":"2023-09-20 13:13:55","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:648","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(mdev_referencia_contable, 0) AS num_referencia from clin_far_movim_devol  where mdev_id = (    select nvl(mfde_mdev_id, 0)     from clin_far_movimdet    where mfde_id = 5447067)","time":"2023-09-20 13:13:55","message":"Query obtener Operacion de Referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":965915,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e20\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e15\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eTRA\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3338639\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e6\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e0\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1051765\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e759021795\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e0\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e20\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body XML : Solicitud 965915 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>20</BodegaOrigen><BodegaDestino>15</BodegaDestino><TipoProceso>TRA</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3338639</OperacionConsumoRef><TipoOperacion>6</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>0</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1051765</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>759021795</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>0</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>20</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":965915,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[El proceso debe recepcionar todos los ítems despachados]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body bodyRetornado : Solicitud 965915 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[El proceso debe recepcionar todos los ítems despachados]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 965915 AND MFDE_TIPO_MOV = 50","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MFDE_SOLI_ID = 965915 AND MFDE_TIPO_MOV = 50","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[El proceso debe recepcionar todos los ítems despachados] ',0,999)  WHERE  MOVF_SOLI_ID = 965915","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:55","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:55","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1009900 \t and det.MFDE_TIPO_MOV = 62 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (160) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1009900 \tAND dev.MDEV_MOVF_TIPO = 62","time":"2023-09-20 13:13:55","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1475","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1009900) and ESACODIGO = 2","time":"2023-09-20 13:13:55","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1511","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (160)  and mfde_soli_id = 1009900 and mfde_mein_codmei = '004458320' and MFDE_CANTIDAD >= '108'","time":"2023-09-20 13:13:55","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1009900,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e8\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e28\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107300\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e72501\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e004458320\u003c/ProductoCod\u003e\u003cCantidadStock\u003e108\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7300\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e108\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e8\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body XML : Solicitud 1009900 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>8</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>28</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107300</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>72501</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>004458320</ProductoCod><CantidadStock>108</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7300</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>108</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>8</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1009900,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la devolución falta informar el número de operación de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body bodyRetornado : Solicitud 1009900 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la devolución falta informar el número de operación de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1009900 AND MDEV_MOVF_TIPO = 62","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1009900 AND MDEV_MOVF_TIPO = 62","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1009900","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:55","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:55","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 968741 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 968741 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:55","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 968741) and ESACODIGO = 2","time":"2023-09-20 13:13:55","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 968741 and mfde_mein_codmei = '590119952' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:55","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":968741,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e4\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3341923\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107204\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e70229\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e590119952\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7204\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e4\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body XML : Solicitud 968741 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>4</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3341923</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107204</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>70229</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>590119952</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7204</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>4</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":968741,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:55","message":"Body bodyRetornado : Solicitud 968741 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 968741 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:55","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 968741 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[para el producto 590119952 se esta devolviendo una mayor cantidad de lo despachado] ',0,999)  WHERE  MOVF_SOLI_ID = 968741","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:56","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:56","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1000519 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1000519 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1000519) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1000519 and mfde_mein_codmei = '000004705' and MFDE_CANTIDAD >= '4'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1000519,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e5\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e28\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107503\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e71532\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e000004705\u003c/ProductoCod\u003e\u003cCantidadStock\u003e4\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7503\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e4\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e5\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:56","message":"Body XML : Solicitud 1000519 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>5</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>28</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107503</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>71532</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>000004705</ProductoCod><CantidadStock>4</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7503</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>4</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>5</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1000519,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Para la devolución falta informar el número de operación de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se encontraron problemas al validar la estructura de la cabecera]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:56","message":"Body bodyRetornado : Solicitud 1000519 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Para la devolución falta informar el número de operación de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se encontraron problemas al validar la estructura de la cabecera]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1000519 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1000519 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[Para la devolución falta informar el número de operación de consumo de referencia][para un tipo de proceso de devolución se debe informar la operacion de consumo de referencia][Se encontraron problemas al validar la estructura de la cabecera] ',0,999)  WHERE  MOVF_SOLI_ID = 1000519","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:56","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:56","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1014195 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1014195 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '999512091' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '961017888' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '108234873' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '158673695' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '380513705' and MFDE_CANTIDAD >= '2'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '016820546' and MFDE_CANTIDAD >= '7'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014195) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014195 and mfde_mein_codmei = '914498649' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014195,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3434877\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e73526\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e999512091\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e961017888\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cProductoCod\u003e108234873\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cProductoCod\u003e158673695\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cProductoCod\u003e380513705\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cProductoCod\u003e016820546\u003c/ProductoCod\u003e\u003cCantidadStock\u003e7\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cCantidadStock\u003e7\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cProductoCod\u003e914498649\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:56","message":"Body XML : Solicitud 1014195 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3434877</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>73526</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>999512091</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>961017888</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>3</Linea><ProductoCod>108234873</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>3</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>4</Linea><ProductoCod>158673695</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>4</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>5</Linea><ProductoCod>380513705</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>5</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>6</Linea><ProductoCod>016820546</ProductoCod><CantidadStock>7</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>6</Linea><CantidadStock>7</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>7</Linea><ProductoCod>914498649</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>7</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014195,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al encontrar despacho del producto 158673695 para realizar devolución]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:56","message":"Body bodyRetornado : Solicitud 1014195 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al encontrar despacho del producto 158673695 para realizar devolución]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014195 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014195 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,999)  WHERE  MOVF_SOLI_ID = 1014195","time":"2023-09-20 13:13:56","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:56","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:56","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 1014649 \t and det.MFDE_TIPO_MOV = 63 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  \tAND mfde_tipo_mov in (140) AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 1014649 \tAND dev.MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:56","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '224195737' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '025467012' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '899896363' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '218940737' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '158673695' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '016820546' and MFDE_CANTIDAD >= '6'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '058198605' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"trace","file":"enviarMovimientosFin702.go:1559","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 1014649) and ESACODIGO = 2","time":"2023-09-20 13:13:56","message":"Query obtener unor correlativo y centro de consumo"}
{"level":"trace","file":"enviarMovimientosFin702.go:1595","funcion":"controller.EnviarmovimientosFin702","query":" select nvl(mfde_referencia_contable, 0), mfde_id  from clin_far_movimdet  where  mfde_tipo_mov IN (140)  and mfde_soli_id = 1014649 and mfde_mein_codmei = '914498649' and MFDE_CANTIDAD >= '1'","time":"2023-09-20 13:13:56","message":"Query obtener operacion de referencia"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014649,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eDEV\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e1\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e3435471\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e29\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003eSin Observacion\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e73549\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e224195737\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e025467012\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cProductoCod\u003e899896363\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e3\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cProductoCod\u003e218940737\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e4\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cProductoCod\u003e158673695\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e5\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cProductoCod\u003e016820546\u003c/ProductoCod\u003e\u003cCantidadStock\u003e6\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e6\u003c/Linea\u003e\u003cCantidadStock\u003e6\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cProductoCod\u003e058198605\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e7\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e8\u003c/Linea\u003e\u003cProductoCod\u003e914498649\u003c/ProductoCod\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e8\u003c/Linea\u003e\u003cCantidadStock\u003e1\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:56","message":"Body XML : Solicitud 1014649 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>DEV</TipoProceso><TipoTransaccion>1</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>3435471</OperacionConsumoRef><TipoOperacion>29</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>Sin Observacion</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>73549</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>224195737</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>025467012</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>3</Linea><ProductoCod>899896363</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>3</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>4</Linea><ProductoCod>218940737</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>4</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>5</Linea><ProductoCod>158673695</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>5</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>6</Linea><ProductoCod>016820546</ProductoCod><CantidadStock>6</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>6</Linea><CantidadStock>6</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>7</Linea><ProductoCod>058198605</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>7</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>8</Linea><ProductoCod>914498649</ProductoCod><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>8</Linea><CantidadStock>1</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":1014649,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al encontrar despacho del producto 158673695 para realizar devolución]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:57","message":"Body bodyRetornado : Solicitud 1014649 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al encontrar despacho del producto 158673695 para realizar devolución]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2220","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014649 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim_devol set MDEV_REFERENCIA_CONTABLE = NVL(0, 0 ),int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'  AND MDEV_SOLI_ID = 1014649 AND MDEV_MOVF_TIPO = 63","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movim_devol\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('[problemas al encontrar despacho del producto 158673695 para realizar devolución] ',0,999)  WHERE  MOVF_SOLI_ID = 1014649","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movim\""}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:57","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:57","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:13:57","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:57","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:57","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:57","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450174, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:57","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450174, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109270,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109270,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:13:57","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:13:57","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:57","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:57","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:13:57","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:58","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:58","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:58","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450175, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:58","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450175, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109271,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:58","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109271,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:58","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:13:58","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:13:58","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:58","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:58","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:13:58","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:58","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:58","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:58","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450176, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:59","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450176, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109272,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:59","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109272,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:59","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:13:59","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:13:59","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:13:59","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:13:59","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:13:59","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:59","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:13:59","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:13:59","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450177, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:13:59","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450177, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109273,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:13:59","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109273,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:14:00","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:14:00","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:14:00","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:14:00","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:14:00","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:14:00","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:14:00","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:14:00","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:14:00","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450178, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:14:00","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450178, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109274,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:14:00","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109274,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:14:00","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:14:01","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:14:01","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:14:01","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:14:01","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:14:01","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:14:01","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"trace","file":"enviarMovimientosFin702.go:796","funcion":"controller.EnviarmovimientosFin702","query":"select nvl(guo.centroconsumo, 0), nvl(guo.unor_correlativo,0) from glo_unidades_organizacionales guo where guo.cod_servicio = (select soli_codservicioactual from  clin_far_solicitudes where SOLI_ID = 990227)  and ESACODIGO = 2","time":"2023-09-20 13:14:01","message":"Query obtener centro de consumo y unor correlativo"}
{"level":"info","file":"enviarMovimientosFin702.go:2020","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003cEnvelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"\u003e\u003cBody\u003e\u003cwmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cOperacion\u003e\u003cEmpresa\u003e2\u003c/Empresa\u003e\u003cDivision\u003e1\u003c/Division\u003e\u003cUnidad\u003e1\u003c/Unidad\u003e\u003cFechaProceso\u003e20230920\u003c/FechaProceso\u003e\u003cBodegaOrigen\u003e12\u003c/BodegaOrigen\u003e\u003cBodegaDestino\u003e0\u003c/BodegaDestino\u003e\u003cTipoProceso\u003eCON\u003c/TipoProceso\u003e\u003cTipoTransaccion\u003e2\u003c/TipoTransaccion\u003e\u003cRecepcionAutomatica\u003e0\u003c/RecepcionAutomatica\u003e\u003cOperacionConsumoRef\u003e0\u003c/OperacionConsumoRef\u003e\u003cTipoOperacion\u003e22\u003c/TipoOperacion\u003e\u003cUsuarioProceso\u003eLOGISTICO\u003c/UsuarioProceso\u003e\u003cGlosaOperacion\u003epedido\u003c/GlosaOperacion\u003e\u003cCentroConsumo\u003e107400\u003c/CentroConsumo\u003e\u003cRut\u003e \u003c/Rut\u003e\u003cTipoDocumento\u003e0\u003c/TipoDocumento\u003e\u003cFolioDocumento\u003e0\u003c/FolioDocumento\u003e\u003cFechaDocumento\u003e20230920\u003c/FechaDocumento\u003e\u003cNroRefExterno\u003e1095637\u003c/NroRefExterno\u003e\u003cDetalleOperacion\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878\u003c/ProductoCod\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cCantidadStock\u003e2\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003cLineaDetalle\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cProductoCod\u003e050008879\u003c/ProductoCod\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cValorTotal\u003e0\u003c/ValorTotal\u003e\u003cCentroCosto\u003e7400\u003c/CentroCosto\u003e\u003cConceptoImp\u003e0\u003c/ConceptoImp\u003e\u003cTipoProyecto\u003e0\u003c/TipoProyecto\u003e\u003cNumeroProyecto\u003e \u003c/NumeroProyecto\u003e\u003cDetalleFisico\u003e\u003cLineaFisico\u003e\u003cLinea\u003e2\u003c/Linea\u003e\u003cCantidadStock\u003e500\u003c/CantidadStock\u003e\u003cCantidad2\u003e0\u003c/Cantidad2\u003e\u003cUbicacion\u003e12\u003c/Ubicacion\u003e\u003cNumeroLote\u003e \u003c/NumeroLote\u003e\u003cLoteFecExpiracion\u003e19000101\u003c/LoteFecExpiracion\u003e\u003cNumeroSerie\u003e \u003c/NumeroSerie\u003e\u003cRotulo\u003e \u003c/Rotulo\u003e\u003cRotulo2\u003e \u003c/Rotulo2\u003e\u003c/LineaFisico\u003e\u003c/DetalleFisico\u003e\u003c/LineaDetalle\u003e\u003c/DetalleOperacion\u003e\u003c/Operacion\u003e\u003c/wmIntegraOperacion\u003e\u003c/Body\u003e\u003c/Envelope\u003e"},"time":"2023-09-20 13:14:01","message":"Body XML : Solicitud 990227 <Envelope xmlns=\"http://schemas.xmlsoap.org/soap/envelope/\"><Body><wmIntegraOperacion xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><Operacion><Empresa>2</Empresa><Division>1</Division><Unidad>1</Unidad><FechaProceso>20230920</FechaProceso><BodegaOrigen>12</BodegaOrigen><BodegaDestino>0</BodegaDestino><TipoProceso>CON</TipoProceso><TipoTransaccion>2</TipoTransaccion><RecepcionAutomatica>0</RecepcionAutomatica><OperacionConsumoRef>0</OperacionConsumoRef><TipoOperacion>22</TipoOperacion><UsuarioProceso>LOGISTICO</UsuarioProceso><GlosaOperacion>pedido</GlosaOperacion><CentroConsumo>107400</CentroConsumo><Rut> </Rut><TipoDocumento>0</TipoDocumento><FolioDocumento>0</FolioDocumento><FechaDocumento>20230920</FechaDocumento><NroRefExterno>1095637</NroRefExterno><DetalleOperacion><LineaDetalle><Linea>1</Linea><ProductoCod>002127878</ProductoCod><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>1</Linea><CantidadStock>2</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle><LineaDetalle><Linea>2</Linea><ProductoCod>050008879</ProductoCod><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><ValorTotal>0</ValorTotal><CentroCosto>7400</CentroCosto><ConceptoImp>0</ConceptoImp><TipoProyecto>0</TipoProyecto><NumeroProyecto> </NumeroProyecto><DetalleFisico><LineaFisico><Linea>2</Linea><CantidadStock>500</CantidadStock><Cantidad2>0</Cantidad2><Ubicacion>12</Ubicacion><NumeroLote> </NumeroLote><LoteFecExpiracion>19000101</LoteFecExpiracion><NumeroSerie> </NumeroSerie><Rotulo> </Rotulo><Rotulo2> </Rotulo2></LineaFisico></DetalleFisico></LineaDetalle></DetalleOperacion></Operacion></wmIntegraOperacion></Body></Envelope>"}
{"level":"info","file":"enviarMovimientosFin702.go:2069","funcion":"controller.EnviarmovimientosFin702","contexto":{"solicitud":990227,"xml":"\u003c?xml version=\"1.0\" encoding=\"utf-8\"?\u003e\u003csoap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"\u003e\u003csoap:Body\u003e\u003cwmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"\u003e\u003cwmIntegraOperacionResult\u003e\u003cMensajes\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Operacion 3450179, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[Se cancela proceso de aprobacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003cMensajeNxt\u003e\u003cCodigo\u003e160030\u003c/Codigo\u003e\u003cMessage\u003e[problemas al aprobar operacion]\u003c/Message\u003e\u003cProcesoNegocio\u003eDB\u003c/ProcesoNegocio\u003e\u003cSeveridad\u003e4\u003c/Severidad\u003e\u003c/MensajeNxt\u003e\u003c/Mensajes\u003e\u003cStatus\u003e1\u003c/Status\u003e\u003cCodError\u003e0\u003c/CodError\u003e\u003cEstadoResultado\u003e1\u003c/EstadoResultado\u003e\u003cFolio\u003e0\u003c/Folio\u003e\u003cDetalleCodigoError\u003e\u003cDetalleCodigoError\u003e\u003cLinea\u003e1\u003c/Linea\u003e\u003cProductoCod\u003e002127878                \u003c/ProductoCod\u003e\u003cObservacion\u003eProblema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)\u003c/Observacion\u003e\u003c/DetalleCodigoError\u003e\u003c/DetalleCodigoError\u003e\u003c/wmIntegraOperacionResult\u003e\u003c/wmIntegraOperacionResponse\u003e\u003c/soap:Body\u003e\u003c/soap:Envelope\u003e"},"time":"2023-09-20 13:14:01","message":"Body bodyRetornado : Solicitud 990227 <?xml version=\"1.0\" encoding=\"utf-8\"?><soap:Envelope xmlns:soap=\"http://schemas.xmlsoap.org/soap/envelope/\" xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\" xmlns:xsd=\"http://www.w3.org/2001/XMLSchema\"><soap:Body><wmIntegraOperacionResponse xmlns=\"http://tempuri.org/wsLogIntegraOperacion/wsLogIntegraOperacion\"><wmIntegraOperacionResult><Mensajes><MensajeNxt><Codigo>160030</Codigo><Message>[Operacion 3450179, linea 1, producto 002127878, bodega 12       , sobregiro en cantidad al actualizar saldos por bodega]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[Se cancela proceso de aprobacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt><MensajeNxt><Codigo>160030</Codigo><Message>[problemas al aprobar operacion]</Message><ProcesoNegocio>DB</ProcesoNegocio><Severidad>4</Severidad></MensajeNxt></Mensajes><Status>1</Status><CodError>0</CodError><EstadoResultado>1</EstadoResultado><Folio>0</Folio><DetalleCodigoError><DetalleCodigoError><Linea>1</Linea><ProductoCod>002127878                </ProductoCod><Observacion>Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01)</Observacion></DetalleCodigoError></DetalleCodigoError></wmIntegraOperacionResult></wmIntegraOperacionResponse></soap:Body></soap:Envelope>"}
{"level":"trace","file":"enviarMovimientosFin702.go:2157","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109275,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:14:01","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2322","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movimdet set mfde_referencia_contable = NVL(mfde_referencia_contable,0) ,int_erp_estado = 'OBSERVADO' ,MFDE_AGRUPADOR_ID = 1109275,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR('Problema al actualizar saldos, se genero un sobregiro (ExiApr_ActSaldoValorizado01) ',0,255)  WHERE int_erp_estado <> 'TRASPASADO' AND int_erp_error <> 'EXITO'   AND MFDE_MEIN_CODMEI = TRIM('002127878                ')  AND MFDE_SOLI_ID = 990227 AND MFDE_TIPO_MOV = 105","time":"2023-09-20 13:14:01","message":"Query update de tabla \"clin_far_movimdet\""}
{"level":"trace","file":"enviarMovimientosFin702.go:2380","funcion":"controller.EnviarmovimientosFin702","query":"update clin_far_movim set INT_ERP_REFERENCIA = 0 ,int_erp_estado = 'OBSERVADO' ,int_erp_fecha = (to_date(to_char(sysdate,'DD/MM/YYYY'),'DD/MM/YYYY')),INT_ERP_ERROR = SUBSTR(' ',0,999)  WHERE  MOVF_SOLI_ID = 990227","time":"2023-09-20 13:14:01","message":"Query update de tabla \"clin_far_movim\""}
{"level":"info","file":"enviarMovimientosFin702.go:2397","funcion":"controller.EnviarmovimientosFin702","contexto":{"inNumeromovimiento":0,"sobreGiro":true},"time":"2023-09-20 13:14:01","message":"Reproceso"}
{"level":"trace","file":"enviarMovimientosFin702.go:26","funcion":"controller.EnviarmovimientosFin702","time":"2023-09-20 13:14:02","message":"Entrando a controller.EnviarmovimientosFin702"}
{"level":"trace","file":"enviarMovimientosFin702.go:40","funcion":"controller.EnviarmovimientosFin702","query":" select fpar_valor from clin_far_param where fpar_tipo = 80 and fpar_codigo = 1 and fpar_estado = 0","time":"2023-09-20 13:14:02","message":"Query obtener URL de wsLogIntegraPedido"}
{"level":"trace","file":"enviarMovimientosFin702.go:308","funcion":"controller.EnviarmovimientosFin702","query":" SELECT        nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(det.MFDE_REFERENCIA_CONTABLE, 0) as OperacionConsumoRef  \t,nvl(rownum, 0) as Linea \t ,nvl(det.mfde_ctas_id, 0) as ctaID \t,nvl(det.mfde_id, 0) as mdetID \t ,nvl(det.mfde_mein_id, 0) as ProductoID \t,nvl(det.mfde_mein_codmei , '') as productocod  \t,nvl(det.mfde_cantidad , 0) as cantidadstock  \t,nvl(0 , 0) as cantidad2  \t,nvl(0 , 0) as valortotal \t,nvl(0 , 0) as conceptoimp \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as tipoproyecto  \t,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as numeroproyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD  \t,nvl(det.mfde_lote , ' ') as numerolote  \t,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as lotefecexpiracion  \t,nvl(' ', ' ') as numeroserie  \t,nvl(det.MFDE_TIPO_MOV, 0) AS Tipo    ,'NORMAL' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     where sol.soli_id = cab.movf_soli_id), 0) as TipoSolicitud    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei)  FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id  AND (mfde_tipo_mov = det.mfde_tipo_mov or mfde_tipo_mov = det.mfde_tipo_mov * 10 )  AND mfde_mein_id = det.mfde_mein_id AND INT_ERP_ESTADO <> 'TRASPASADO'  GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0) AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , det.mfde_agrupador_id || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det  WHERE          cab.movf_id = det.mfde_movf_id     and det.int_erp_estado <> 'TRASPASADO' AND det.int_erp_error <> 'EXITO'     and cab.hdgcodigo = 1 \t and cab.movf_soli_id = 990227 \t and det.MFDE_TIPO_MOV = 105 union SELECT       nvl(cab.esacodigo, 0) AS Empresa      ,nvl(cab.hdgcodigo, 0) AS Division      ,1 AS Unidad      ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual), '19000101') AS fechaproceso     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_origen), 0) AS BodegaOrigen     ,nvl((select bod.FBO_CODIGOBODEGA from clin_far_bodegas bod where bod.fbod_codigo = cab.movf_bod_destino), 0) AS BodegaDestino     ,nvl((select TO_CHAR(sysdate, 'YYYYMMDD') from dual) , '19000101') AS FechaDocumento     ,nvl(cab.movf_rece_id, 0) as ReceID     ,nvl(dev.mdev_referencia_contable, 0) as OperacionConsumoRef      ,nvl(rownum, 0) as Linea \t ,nvl(dev.mdev_ctas_id, 0) as ctaID \t ,nvl(dev.mdev_id, 0) as mdetID \t ,nvl((select mfde_mein_id from clin_far_movimdet where mfde_id = dev.mdev_mfde_id), 0) as ProductoID     ,nvl((select det.mfde_mein_codmei from clin_far_movimdet det where mfde_id = dev.mdev_mfde_id), '') as ProductoCod   \t ,nvl(dev.mdev_cantidad , 0) as CantidadStock   \t ,nvl(0 , 0) as Cantidad2   \t ,nvl(0 , 0) as ValorTotal   \t ,nvl(0 , 0) as ConceptoImp   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 1) , 0) as TipoProyecto   \t ,nvl((select fpar_valor from clin_far_param where fpar_tipo = 66 and fpar_codigo = 2) , 0) as NumeroProyecto  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_origen) , 0) as ubicacionO  \t,nvl((select ubicacion_fin700 from clin_far_bodegas where fbod_codigo = cab.movf_bod_destino) , 0) as ubicacionD   \t ,nvl(det.mfde_lote , ' ') as NumeroLote   \t ,nvl(to_char(det.mfde_lote_fechavto, 'YYYYMMDD') , '19000101') as LoteFecExpiracion   \t ,nvl(' ', ' ') as NumeroSerie      ,nvl(dev.mdev_movf_tipo, 0) AS Tipo     ,'DEVOLUCION' as TipoMovim   ,nvl((select sol.soli_tipo_solicitud from clin_far_solicitudes sol     \t  where sol.SOLI_ID = MOVF_SOLI_ID), 0) as TIPO_SOLICITUD    ,nvl((select SOLI_OBSERVACIONES from clin_far_solicitudes where soli_id = cab.movf_soli_id), 'Sin Observacion') as GlosaOperacion   ,nvl((SELECT centroconsumo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio = (select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centroconsumo    ,nvl((SELECT unor_correlativo FROM glo_unidades_organizacionales WHERE esacodigo = cab.esacodigo AND cod_servicio =(select sol.SOLI_CODSERVICIOACTUAL from clin_far_solicitudes sol where sol.soli_id = cab.movf_soli_id)), 0) AS centrocosto    ,nvl((SELECT fpar_valor FROM clin_far_param WHERE fpar_tipo = 66 AND fpar_codigo = 3), 0) as UsuarioProceso   , NVL((SELECT COUNT(mfde_mein_codmei) FROM clin_far_movimdet where mfde_soli_id = cab.movf_soli_id AND MFDE_ID = MDEV_MFDE_ID  AND mfde_mein_id = det.mfde_mein_id GROUP BY mfde_mein_codmei HAVING COUNT(mfde_mein_codmei) > 0), 0)  AS CANT , nvl(MFDE_REF_DESPACHO, 0)  , dev.MDEV_AGRUPADOR_ID || det.mfde_ref_despacho AS NroRefExterno  FROM      clin_far_movim cab,      clin_far_movimdet det,      clin_far_movim_devol dev  WHERE      cab.movf_id = det.mfde_movf_id     and det.mfde_id = dev.mdev_mfde_id     and dev.int_erp_estado <> 'TRASPASADO' AND dev.int_erp_error <> 'EXITO'         and cab.hdgcodigo = 1 \tand cab.movf_soli_id = 990227 \tAND dev.MDEV_MOVF_TIPO = 105","time":"2023-09-20 13:14:02","message":"Query obtner todos los detalle de moviminetos pendiente de despachar a Fin700"}
{"level":"info","file":"administradorLoggers.go:85","funcion":"logging.initLogger","time":"2023-09-20 14:02:08","message":"Logs FIN 700 abiertos exitosamente"}
{"level":"info","file":"administradorLoggers.go:85","funcion":"logging.initLogger","time":"2023-09-20 14:36:48","message":"Logs FIN 700 abiertos exitosamente"}
{"level":"info","file":"administradorLoggers.go:85","funcion":"logging.initLogger","time":"2023-09-20 14:37:33","message":"Logs FIN 700 abiertos exitosamente"}
